# umask 指定在建立文件时预设的权限掩码

作用: 指定在建立文件时预设的权限掩码。 
格式: umask [-p] [-S] [mode]

选项如下。

-S: 以文字的方式来表示权限掩码。
-p: 以数字的方式来表示权限掩码。
mode: 权限掩码。
说明:当最初登录到系统中时, umask命令确定了创建文件的默认模式。这一命令实际上和chmod命令正好相反。系统管理员必须要为你设置一个合理的umask值，以确保你创建的文件具有所希望的默认权限，防止其他非同组用户对你的文件具有写权限。在已经登录之后，可以按照个人的偏好使用umask命令来改变文件创建的默认权限。相应的改变直到退出该shell或使用另外的umask命令之前一直有效。一般来说，umask命令是在/etc/profile文件中设置的，每个用户在登录时都会引用这个文件，所以如果希望改变所有用户的umask,可以在该文件中加入相应的条目。如果希望永久性地设置自己的umask值，那么就把它放在自己$HOME目录下的.profile或.bash_profile 文件中。

关于如何计算umask值，umask命令允许你设定文件创建时的默认模式，对应每一类用户(文件属主、同组用户、其他用户)存在一个相应的umask值中的数字。对于文件来说，这一数字的最大值是6。系统不允许你在创建一个文本文件时就赋予它执行权限，必须在创建后用chmod命令增加这一权限。目录则允许设置执行权限，这样针对目录来说，umask中各个数字最大可以到7。

表2-3列出了常用的umask值及对应的目录和文件权限。
| umask值 | 目录权限 | 文件权限 |
| :-: | :-: | :-: |
| 022 | 775 | 644 |
| 027 | 750 | 640 |
| 002 | 755 | 664 |
| 006 | 771 | 660 |
| 007 | 770 | 660 |

实例应用如下。

(1)如果想知道当前的umask值，可以使用没有任何参数的umask命令:
```
#umask
0022
```

(2)如果想要改变umask值，只要使用umask命令设置一个新的值即可: 
```
#umask 002
```

(3)确认一下系统是否已经接受了新的umask值:
```
# umask 002
# umask
0002
```
在使用umask命令之前，一定要弄清楚到底希望文件/目录具有什么样的默认权限。否则可能会得到一些非常奇怪的结果。例如，如果将umask值设置为600,那么所创建的文件/目录的默认权限就是066。 

(4)使用umask设置安全权限: 
```
# umask 117
# umask -S
u=rW,g=rW,o=
```
上述命令把umask值改为177,结果只有文件所有者具有读写文件的权限，其他用户不能访问该文件。这显然是一种非常安全的状态。